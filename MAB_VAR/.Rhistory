df = rbind(a,b,c)
df$Type = c("utility","benefit","cost")
colnames(df) <- c( "Control", "Treatment_1", "Treatment_2", "Type/Standard Deviation")
df = df[c("Type/Standard Deviation", "Control", "Treatment_1", "Treatment_2")]
kable(df)
# Average actual Vs. optimal utility per group
a <- main_utility %>% select(iteration, actual_group, actual_value, first) %>% group_by(iteration, actual_group) %>%
summarise(m_actual_utility = mean(actual_value), m_optimal_utility = mean(first)) %>%
ungroup() %>% group_by(actual_group) %>%
summarise(mean_actual_utility = mean(m_actual_utility), mean_optimal_utility = mean(m_optimal_utility),
sd_actual_utility = sd(m_actual_utility), sd_optimal_utility = sd(m_optimal_utility))
kable(a)
a <- main_utility %>% select(iteration, actual_group, actual_value, first) %>% group_by(iteration, actual_group) %>%
summarise(m_actual_utility = mean(actual_value), m_optimal_utility = mean(first)) %>%
ungroup() %>% group_by(actual_group) %>%
summarise(mean_actual_utility = mean(m_actual_utility), mean_optimal_utility = mean(m_optimal_utility)) %>%
gather(utility_type, utility, mean_actual_utility: mean_optimal_utility)
b <- main_utility %>% select(iteration, actual_group, actual_value, first) %>% group_by(iteration, actual_group) %>%
summarise(m_actual_utility = mean(actual_value), m_optimal_utility = mean(first)) %>%
ungroup() %>% group_by(actual_group) %>%
summarise(se_actual_utility = sd(m_actual_utility)/sqrt(n()), se_optimal_utility = sd(m_optimal_utility)/sqrt(n())) %>%
gather(utility_type, utility, se_actual_utility: se_optimal_utility)
a["se"] = b$utility
ggplot(a,aes(actual_group,utility,fill=utility_type))+
geom_bar(stat="identity",position="dodge")+
geom_errorbar(aes(ymin=utility+se*qnorm(0.025), ymax=utility+se*qnorm(0.975)),width=.2,position=position_dodge(.9)) +
labs(x = "Treatment_group", y = "Utility in RMB", title ="Graph of Average Actual Utility and Average Predicted Optimal Utility (CI)")
# Average actual Vs. optimal utility per group
a <- main_utility %>% select(iteration, actual_value, first) %>% group_by(iteration) %>%
summarise(m_actual_utility = mean(actual_value), m_optimal_utility = mean(first)) %>%
ungroup() %>%
summarise(mean_actual_utility = mean(m_actual_utility), mean_optimal_utility = mean(m_optimal_utility),
sd_actual_utility = sd(m_actual_utility), sd_optimal_utility = sd(m_optimal_utility))
kable(a)
a <- main_utility %>% select(iteration, actual_value, first) %>% group_by(iteration) %>%
summarise(m_actual_utility = mean(actual_value), m_optimal_utility = mean(first)) %>%
ungroup() %>%
summarise(mean_actual_utility = mean(m_actual_utility), mean_optimal_utility = mean(m_optimal_utility)) %>%
gather(utility_type, utility, mean_actual_utility: mean_optimal_utility)
b <- main_utility %>% select(iteration, actual_value, first) %>% group_by(iteration) %>%
summarise(m_actual_utility = mean(actual_value), m_optimal_utility = mean(first)) %>%
ungroup() %>%
summarise(se_actual_utility = sd(m_actual_utility)/sqrt(n()), se_optimal_utility = sd(m_optimal_utility)/sqrt(n())) %>%
gather(utility_type, utility, se_actual_utility: se_optimal_utility)
a["se"] = b$utility
ggplot(a,aes(utility_type,utility))+
geom_bar(stat="identity")+
geom_errorbar(aes(ymin=utility+se*qnorm(0.025), ymax=utility+se*qnorm(0.975)),width=.2,position=position_dodge(.9)) +
labs(x = "Treatment_group", y = "Utility in RMB", title ="Graph of Average Actual Utility and Average Predicted Optimal Utility overall (CI)")
a <- main_utility %>% filter(iteration==1) %>% select(actual_group) %>% group_by(actual_group) %>% summarise(cnt = n()) %>%
spread(actual_group, cnt)
b <- main_utility %>% filter(iteration==1) %>% select(first_index) %>% group_by(first_index) %>% summarise(cnt = n()) %>%
spread(first_index, cnt)
c <- main_utility %>% filter(iteration==1) %>% select(actual_group, first_index) %>% group_by(actual_group, first_index) %>% summarise(cnt = n())
kable(c)
df = rbind(a,b)
df$Allocation_Type = c("Actual_allocation","Optimal_allocation")
colnames(df) <- c( "Control", "Treatment_1", "Treatment_2", "Allocation_Type")
df = df[c("Allocation_Type", "Control", "Treatment_1", "Treatment_2")]
kable(df)
# Average actual Vs. optimal utility per group
b <- train_utility %>% select(iteration, actual_group, actual_value) %>% group_by(iteration, actual_group) %>%
summarise(m_actual_utilty = mean(actual_value)) %>% group_by(actual_group) %>% summarise(mean_actual_utilty = mean(m_actual_utilty))
a <-main_utility %>% select(iteration, actual_group, first_index, second_index, third_index, actual_value) %>%
mutate(allocation = ifelse(first_index == actual_group, "First", ifelse(second_index==actual_group, "Second", "Third"))) %>%
group_by(iteration, allocation) %>% summarise(mav = mean(actual_value)) %>% group_by(allocation) %>% summarise(mean_av = mean(mav), se = sd(mav)/sqrt(n()))
ggplot(a,aes(allocation,mean_av))+
geom_bar(stat="identity")+
geom_errorbar(aes(ymin=mean_av+se*qnorm(0.025), ymax=mean_av+se*qnorm(0.975)),width=.2,position=position_dodge(.9)) + theme_bw() +
labs(x = "Rank of Treatment Group", y = "Utility (RMB)")+ggsave("our-blood-30.png", width = 8, height = 5)
a <-main_utility %>% select(iteration, actual_group, first_index, second_index, third_index, actual_value) %>%
mutate(allocation = ifelse(first_index == actual_group, "first", ifelse(second_index==actual_group, "second", "third"))) %>%
group_by(iteration, actual_group, allocation) %>% summarise(mav = mean(actual_value)) %>% ungroup() %>%
group_by(actual_group, allocation) %>% summarise(mean_av = mean(mav), se = sd(mav)/sqrt(n()))
ggplot(a,aes(actual_group,mean_av,fill=allocation))+
geom_bar(stat="identity",position="dodge")+
geom_errorbar(aes(ymin=mean_av+se*qnorm(0.025), ymax=mean_av+se*qnorm(0.975)),width=.2,position=position_dodge(.9)) +
labs(x = "Rank of treatment group", y = "Utility (RMB)", title ="Average actual utility")
a <- rnorm(10,1)
?rnomrm
?rnorm
library(ggplot)
library(ggplot2)
a <- rnorm(10,1,2)
hist(a)
a <- rnorm(1000,1,2)
hist(a)
ggplot() + geom_histogram(a)
ggplot() + geom_histogram(aex(x=a))
ggplot() + geom_histogram(aes(x=a))
x <- seq(5, 15, length=1000)
y <- dnorm(x, mean=10, sd=3)
plot(x, y, type="l", lwd=1)
x <- seq(1, 15, length=1000)
y <- dnorm(x, mean=10, sd=3)
plot(x, y, type="l", lwd=1)
a <- rnorm(10000,1,2)
ggplot() + geom_histogram(aes(x=a))
a <- rnorm(100000,1,2)
ggplot() + geom_histogram(aes(x=a))
?geom_histogram
ggplot() + geom_density(aes(x=a),)
ggplot() + geom_density(aes(x=a))
a <- rnorm(1000000,1,2)
ggplot() + geom_density(aes(x=a))
x <- seq(5, 15, length=1000)
x <- seq(5, 15, length=1000)
y <- dnorm(x, mean=10, sd=3)
plot(x, y, type="l", lwd=1)
x <- seq(5, 15, length=1000)
y <- dnorm(x, mean=10, sd=2)
plot(x, y, type="l", lwd=1)
z <- dnorm(x, mean=11, sd=3)
plot(x, z, type="l", lwd=1)
ggplot() + geom_density(aes(x=a))
a <- rnorm(1000000,1,2)
ggplot() + geom_density(aes(x=a))
a <- rnorm(1000000,1,2)
b <- rnorm(1000000,2,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b))
a <- rnorm(1000000,1,2)
b <- rnorm(1000000,2,3)
c <- rnorm(1000000,0,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
x <- seq(5, 15, length=1000)
a <- rnorm(1000000,1,2)
b <- rnorm(1000000,2,3)
c <- rnorm(1000000,0,4)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
a <- rnorm(1000000,1,2)
b <- rnorm(1000000,2,4)
c <- rnorm(1000000,0,5)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
std.error(a[:3])
std.error(a[,3])
std.error(a[c(1,3)])
se(a[c(1,3)])
a <- rnorm(1000000,11,2)
b <- rnorm(1000000,12,4)
c <- rnorm(1000000,10,5)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
(a[c(1,3)])
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
c <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
a[c(1,3)]
mean(a[c(1,4)])
mean(a[c(1,4)])
mean(b[c(1,4)])
mean(c[c(1,4)])
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
c <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
mean(a[c(1,4)])
mean(b[c(1,4)])
mean(c[c(1,4)])
set.seed(100)
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
c <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
mean(a[c(1,4)])
mean(b[c(1,4)])
mean(c[c(1,4)])
mean(b[c(5,15)])
sum(b[c(5,15)])
b[c(5,15)]
(b[c(1,4)])
c(1,10)
mean(a[c(1,4)])
a[c(1,4)]
mean(a[c(1:4)])
a[c(1:4)]
set.seed(100)
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
d <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
mean(a[c(1:3)])
mean(b[c(1:3)])
mean(d[c(1:3)])
sum(b[c(5:15)])
set.seed(1000)
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
d <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
mean(a[c(1:3)])
mean(b[c(1:3)])
mean(d[c(1:3)])
sum(b[c(5:15)])
set.seed(10080)
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
d <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
mean(a[c(1:3)])
mean(b[c(1:3)])
mean(d[c(1:3)])
sum(b[c(5:15)])
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
d <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
mean(a[c(1:3)])
mean(b[c(1:3)])
mean(d[c(1:3)])
sum(b[c(5:15)])
set.seed(120080)
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
d <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
mean(a[c(1:3)])
mean(b[c(1:3)])
mean(d[c(1:3)])
sum(b[c(5:15)])
set.seed(1120080)
a <- rnorm(1000000,11,1)
b <- rnorm(1000000,12,2)
d <- rnorm(1000000,10,3)
ggplot() + geom_density(aes(x=a)) + geom_density(aes(x=b)) + geom_density(aes(x=c))
mean(a[c(1:3)])
mean(b[c(1:3)])
mean(d[c(1:3)])
sum(b[c(5:15)])
sum(c(a[c(1:3)], b[c(1:3)], d[c(1:3)]))
sum(d[c(5:15)])
d[c(5:15)]
ggplot(df_group %>% filter(type %in% c('UCB'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ucb_2.png", width = 8, height = 3, dpi=300, units="in")
library(ggplot2)
library(dplyr)
library(tidyr)
library(ggrepel)
library(ggpubr)
setwd("G:\\My Drive\\Research\\Contextual Bandits\\code\\bandits\\MAB_VAR")
df <- read.csv("output.csv")
df$x = 1:nrow(df)
df_regret <- df %>% select(x, ab_regret, ucb_regret, eps_regret, ucb_inf_var_prop_regret)  %>%
rename(`AB-TESTING` = ab_regret,
`UCB` = ucb_regret,
`E-GREEDY` = eps_regret,
`UCB-INF` = ucb_inf_var_prop_regret) %>%
gather("type", "regret", 2:5)
ggplot(df_regret %>%  filter(type!="E-GREEDY")) +
geom_line(aes(x=x, y=regret, color=type))+
theme_minimal()+
labs(x='No. of Allocations', y = 'Regret', color="Allocation Type")+
ggsave("regret.png", width = 10, height = 4,scale=0.7, units="in")
df_mean_mse <- df %>% select(x, ab_mean_mse, ucb_mean_mse, eps_mean_mse, ucb_inf_var_prop_mean_mse) %>%
rename(`AB-TESTING` = ab_mean_mse,
`UCB` = ucb_mean_mse,
`E-GREEDY` = eps_mean_mse,
`UCB-INF` = ucb_inf_var_prop_mean_mse) %>%
gather("type", "mean_mse", 2:5)
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") +
ggsave("mean_mse.png", width = 6.5, height = 5,  scale = 0.8, units="in")
df_var_mse <- df %>% select(x, ab_var_mse, ucb_var_mse, eps_var_mse, ucb_inf_var_prop_var_mse) %>%
rename(`AB-TESTING` = ab_var_mse,
`UCB` = ucb_var_mse,
`E-GREEDY` = eps_var_mse,
`UCB-INF` = ucb_inf_var_prop_var_mse) %>%
gather("type", "var_mse", 2:5)
ggplot(df_var_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=var_mse, color=type), size=1)+
theme_minimal() +
theme(legend.position = "none") +
labs(x='No. of Allocations', y = 'MSE of Variance Estimate', color="Allocation Type") +
ggsave("var_mse.png", width = 6, height = 5, scale = 0.7, units="in")
df <- read.csv("groups.csv")
df$x = 1:nrow(df)
df_group <- df %>% select(x, ab_group, ucb_group, eps_group, ucb_inf_var_prop_group) %>% rename(`AB-TESTING` = ab_group,
`UCB` = ucb_group,
`E-GREEDY` = eps_group,
`UCB-INF` = ucb_inf_var_prop_group) %>%
gather("type", "group", 2:5)
ggplot(df_group) + geom_line(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Allocated Group') +
theme(axis.text.y = element_text(size = 6)) +
ggsave("group.png", width = 8, height = 4)
ggplot(df_group %>% filter(type %in% c('AB-TESTING'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ab.png", width = 10, height = 2, dpi=300, units="in")
ggplot(df_group %>% filter(type %in% c('UCB'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ucb_2.png", width = 8, height = 3, dpi=300, units="in")
#
# ggplot(df_group %>% filter(type=='UCB')) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6)  + theme_bw() +
#   labs(x='Time Period', y = 'Allocated Group') +
#   theme(axis.text.y = element_text(size = 6)) +
#   ggsave("group_ucb.png", width = 8, height =2)
#
# ggplot(df_group %>% filter(type=='UCB-VAR')) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6)  + theme_bw() +
#   labs(x='Time Period', y = 'Allocated Group') +
#   theme(axis.text.y = element_text(size = 6)) +
#   ggsave("group_ucbvar.png", width = 8, height =2)
#
#
# ggplot(df_group %>% filter(type=='AB_testing')) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6)  + theme_bw() +
#   labs(x='Time Period', y = 'Allocated Group') +
#   theme(axis.text.y = element_text(size = 6)) +
#   ggsave("group_ab.png", width = 8, height =2)
#
# df <- read.csv("var.csv")
# df_var <- df %>% select(arm, ab_var, ucb_var, eps_var, mix_var) %>% rename(`AB_testing` = ab_var,
#                                                                                     `UCB` = ucb_var,
#                                                                                    `e-greedy` = eps_var,
#                                                                                    `UCB-VAR` = mix_var) %>%
#   gather("type", "var", 2:5)
# df_var[is.na(df_var)] <- 0
#
# df_var$x = rep(rep(1:2000, each=10),4)
# true_var = c(4.03757288,3.43165603,0.46557525,0.9803696,3.53352318,3.54460421, 4.56793121,1.04190155, 0.7491534,  3.0408862)
# df_var$true_var = rep(true_var, 8000)
#
# df_var$arm = paste("arm ",df_var$arm)
# ggplot(df_var) + geom_point(aes(x=x, y=var, color=type), size=0.3) + geom_hline(aes(yintercept=true_var)) +
#   facet_wrap(~arm, nrow=5) + theme_bw() +
#   labs(x='Time Period', y = 'Variance Estimate', color="Allocation Type") +  theme(legend.position="bottom")+
#   theme(axis.text.y = element_text(size = 6)) + guides(colour = guide_legend(override.aes = list(size = 2))) +
#   ggsave("var.png", width = 8, height = 10)
#
ggplot(df_group %>% filter(type %in% c('UCB-INF'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ucbinf.png", width = 10, height = 2, dpi=300, units="in")
ggplot(df_group %>% filter(type %in% c('UCB-INF'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ucbinf.png", width = 8, height = 2, dpi=300, units="in")
ggplot(df_group %>% filter(type %in% c('UCB'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ucb_2.png", width = 8, height = 2, dpi=300, units="in")
s
install.packages("directlabels", repo="http://r-forge.r-project.org")
#install.packages("directlabels", repo="http://r-forge.r-project.org")
library(lattice)
library(directlabels)
ggplot(df_var_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=var_mse, color=type), size=1)+
theme_minimal() +
theme(legend.position = "none") +
labs(x='No. of Allocations', y = 'MSE of Variance Estimate', color="Allocation Type") +
ggsave("var_mse.png", width = 6, height = 5, scale = 0.7, units="in")
library(ggplot2)
library(dplyr)
library(tidyr)
library(ggrepel)
library(ggpubr)
#install.packages("directlabels", repo="http://r-forge.r-project.org")
library(lattice)
library(directlabels)
setwd("G:\\My Drive\\Research\\Contextual Bandits\\code\\bandits\\MAB_VAR")
df <- read.csv("output.csv")
df$x = 1:nrow(df)
df_regret <- df %>% select(x, ab_regret, ucb_regret, eps_regret, ucb_inf_var_prop_regret)  %>%
rename(`AB-TESTING` = ab_regret,
`UCB` = ucb_regret,
`E-GREEDY` = eps_regret,
`UCB-INF` = ucb_inf_var_prop_regret) %>%
gather("type", "regret", 2:5)
ggplot(df_regret %>%  filter(type!="E-GREEDY")) +
geom_line(aes(x=x, y=regret, color=type))+
theme_minimal()+
labs(x='No. of Allocations', y = 'Regret', color="Allocation Type")+
ggsave("regret.png", width = 10, height = 4,scale=0.7, units="in")
df_mean_mse <- df %>% select(x, ab_mean_mse, ucb_mean_mse, eps_mean_mse, ucb_inf_var_prop_mean_mse) %>%
rename(`AB-TESTING` = ab_mean_mse,
`UCB` = ucb_mean_mse,
`E-GREEDY` = eps_mean_mse,
`UCB-INF` = ucb_inf_var_prop_mean_mse) %>%
gather("type", "mean_mse", 2:5)
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") +
ggsave("mean_mse.png", width = 6.5, height = 5,  scale = 0.8, units="in")
df_var_mse <- df %>% select(x, ab_var_mse, ucb_var_mse, eps_var_mse, ucb_inf_var_prop_var_mse) %>%
rename(`AB-TESTING` = ab_var_mse,
`UCB` = ucb_var_mse,
`E-GREEDY` = eps_var_mse,
`UCB-INF` = ucb_inf_var_prop_var_mse) %>%
gather("type", "var_mse", 2:5)
ggplot(df_var_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=var_mse, color=type), size=1)+
theme_minimal() +
theme(legend.position = "none") +
labs(x='No. of Allocations', y = 'MSE of Variance Estimate', color="Allocation Type") +
ggsave("var_mse.png", width = 6, height = 5, scale = 0.7, units="in")
df <- read.csv("groups.csv")
df$x = 1:nrow(df)
df_group <- df %>% select(x, ab_group, ucb_group, eps_group, ucb_inf_var_prop_group) %>% rename(`AB-TESTING` = ab_group,
`UCB` = ucb_group,
`E-GREEDY` = eps_group,
`UCB-INF` = ucb_inf_var_prop_group) %>%
gather("type", "group", 2:5)
ggplot(df_group) + geom_line(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Allocated Group') +
theme(axis.text.y = element_text(size = 6)) +
ggsave("group.png", width = 8, height = 4)
ggplot(df_group %>% filter(type %in% c('AB-TESTING'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ab.png", width = 10, height = 2, dpi=300, units="in")
ggplot(df_group %>% filter(type %in% c('UCB'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ucb_2.png", width = 8, height = 2, dpi=300, units="in")
ggplot(df_group %>% filter(type %in% c('UCB-INF'))) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6) + facet_grid(type ~.) + theme_bw() +
labs(x='Time Period', y = 'Group') +
theme(axis.text.y = element_text(size = 6)) +   theme(axis.text.y = element_text(size = rel(1)))  +
ggsave("group_ucbinf.png", width = 8, height = 2, dpi=300, units="in")
#
# ggplot(df_group %>% filter(type=='UCB')) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6)  + theme_bw() +
#   labs(x='Time Period', y = 'Allocated Group') +
#   theme(axis.text.y = element_text(size = 6)) +
#   ggsave("group_ucb.png", width = 8, height =2)
#
# ggplot(df_group %>% filter(type=='UCB-VAR')) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6)  + theme_bw() +
#   labs(x='Time Period', y = 'Allocated Group') +
#   theme(axis.text.y = element_text(size = 6)) +
#   ggsave("group_ucbvar.png", width = 8, height =2)
#
#
# ggplot(df_group %>% filter(type=='AB_testing')) + geom_point(aes(x=x, y=factor(group)), shape=1, alpha=0.6)  + theme_bw() +
#   labs(x='Time Period', y = 'Allocated Group') +
#   theme(axis.text.y = element_text(size = 6)) +
#   ggsave("group_ab.png", width = 8, height =2)
#
# df <- read.csv("var.csv")
# df_var <- df %>% select(arm, ab_var, ucb_var, eps_var, mix_var) %>% rename(`AB_testing` = ab_var,
#                                                                                     `UCB` = ucb_var,
#                                                                                    `e-greedy` = eps_var,
#                                                                                    `UCB-VAR` = mix_var) %>%
#   gather("type", "var", 2:5)
# df_var[is.na(df_var)] <- 0
#
# df_var$x = rep(rep(1:2000, each=10),4)
# true_var = c(4.03757288,3.43165603,0.46557525,0.9803696,3.53352318,3.54460421, 4.56793121,1.04190155, 0.7491534,  3.0408862)
# df_var$true_var = rep(true_var, 8000)
#
# df_var$arm = paste("arm ",df_var$arm)
# ggplot(df_var) + geom_point(aes(x=x, y=var, color=type), size=0.3) + geom_hline(aes(yintercept=true_var)) +
#   facet_wrap(~arm, nrow=5) + theme_bw() +
#   labs(x='Time Period', y = 'Variance Estimate', color="Allocation Type") +  theme(legend.position="bottom")+
#   theme(axis.text.y = element_text(size = 6)) + guides(colour = guide_legend(override.aes = list(size = 2))) +
#   ggsave("var.png", width = 8, height = 10)
#
direct.label(ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") +
ggsave("mean_mse.png", width = 6.5, height = 5,  scale = 0.8, units="in"))
direct.label(ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") +
ggsave("mean_mse.png", width = 6.5, height = 5,  scale = 0.8, units="in"))
direct.label(ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") )
ggplot(df_var_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=var_mse, color=type), size=1)+
theme_minimal() +
theme(legend.position = "none") +
labs(x='No. of Allocations', y = 'MSE of Variance Estimate', color="Allocation Type") +
ggsave("var_mse.png", width = 6, height = 5, scale = 0.7, units="in")
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type")
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + geom_dl(aes(label=type),method = "angled.boxes")
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + geom_dl(aes(label=type),method = "angled.boxes")
install.packages("proto")
install.packages("proto")
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + geom_dl(aes(label=type),method = "angled.boxes")
library(ggplot2)
library(dplyr)
library(directlabels)
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + geom_dl(aes(label=type),method = "angled.boxes")
library(proto)
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + geom_dl(aes(label=type),method = "angled.boxes")
?geom_dl
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + geom_dl(aes(label=type),method = "angled.boxes")
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + geom_dl(mapping = aes(label=type),method = "angled.boxes")
eval()
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + directlabels::geom_dl(mapping = aes(label=type),method = "angled.boxes")
ggplot(df_mean_mse %>%  filter(type!="E-GREEDY")) + geom_point(aes(x=x, y=mean_mse, color=type), size=1) +
theme_minimal()+
labs(x='No. of Allocations', y = 'MSE of Mean Estimate', color="Allocation Type") + directlabels::geom_dl(mapping = aes(label=type),method = "last.points")
install.packages("ggplot2")
install.packages("ggplot2")
install.packages("ggplot2")
install.packages("ggplot2")
